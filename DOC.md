# üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è AI –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –í–∏–¥–µ–æ

## üéØ –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

AI –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –í–∏–¥–µ–æ - —ç—Ç–æ Telegram –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ 3D –≤–∏–¥–µ–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º API d-id.com. –ë–æ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è YouTube Shorts.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ NestJS

```
src/
‚îú‚îÄ‚îÄ app.module.ts              # –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ main.ts                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ d-id/                      # –ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å d-id.com API
‚îÇ   ‚îú‚îÄ‚îÄ did.module.ts          # –ú–æ–¥—É–ª—å d-id
‚îÇ   ‚îú‚îÄ‚îÄ did.service.ts         # –°–µ—Ä–≤–∏—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ
‚îÇ   ‚îî‚îÄ‚îÄ did.controller.ts      # API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
‚îú‚îÄ‚îÄ scenes/                    # –°—Ü–µ–Ω—ã –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ scenes.module.ts       # –ú–æ–¥—É–ª—å —Å—Ü–µ–Ω
‚îÇ   ‚îî‚îÄ‚îÄ video-generation.scene.ts # –°—Ü–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ
‚îú‚îÄ‚îÄ menu/                      # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ menu.module.ts         # –ú–æ–¥—É–ª—å –º–µ–Ω—é
‚îÇ   ‚îî‚îÄ‚îÄ menu.service.ts        # –°–µ—Ä–≤–∏—Å –º–µ–Ω—é
‚îú‚îÄ‚îÄ keyboards/                 # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ keyboards.module.ts    # –ú–æ–¥—É–ª—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä
‚îÇ   ‚îî‚îÄ‚îÄ keyboards.service.ts   # –°–µ—Ä–≤–∏—Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä
‚îú‚îÄ‚îÄ users/                     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îú‚îÄ‚îÄ database/                  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ redis/                     # Redis –∫—ç—à
‚îú‚îÄ‚îÄ logger/                    # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îî‚îÄ‚îÄ updates/                   # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
    ‚îú‚îÄ‚îÄ bot.update.ts          # –ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
    ‚îî‚îÄ‚îÄ menu.update.ts         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –º–µ–Ω—é
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** ‚Üí Telegram Bot
2. **Telegram Bot** ‚Üí NestJS Application
3. **NestJS** ‚Üí d-id.com API
4. **d-id.com** ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ
5. **–†–µ–∑—É–ª—å—Ç–∞—Ç** ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### d-id.com API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints:
- `POST /talks` - –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ
- `GET /talks/{id}` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- `POST /audios` - –ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ
- `POST /images` - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
```typescript
interface VideoGenerationRequest {
  photoUrl: string;           // URL —Ñ–æ—Ç–æ
  audioUrl: string;           // URL –∞—É–¥–∏–æ
  script: string;             // –°—Ü–µ–Ω–∞—Ä–∏–π
  platform: 'youtube-shorts'; // –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞
  duration: number;           // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (15-60 —Å–µ–∫)
  quality: '720p' | '1080p'; // –ö–∞—á–µ—Å—Ç–≤–æ
  textPrompt?: string;        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç
}
```

### Telegram Bot —Å—Ü–µ–Ω—ã

#### –°—Ü–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ:
1. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ
2. **–ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–æ–ª–æ—Å–æ–≤—É—é –∑–∞–ø–∏—Å—å
3. **–í–≤–æ–¥ —Å—Ü–µ–Ω–∞—Ä–∏—è** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π
4. **–í—ã–±–æ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã** - YouTube Shorts
5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - 15-60 —Å–µ–∫—É–Ω–¥
6. **–í—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞** - 720p –∏–ª–∏ 1080p
7. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
8. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ d-id.com API

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

#### –§–æ—Ç–æ:
- –§–æ—Ä–º–∞—Ç: JPEG, PNG
- –†–∞–∑–º–µ—Ä: –¥–æ 10MB
- –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–µ–ª–æ–≤–µ–∫

#### –ê—É–¥–∏–æ:
- –§–æ—Ä–º–∞—Ç: OGG, MP3, WAV
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –¥–æ 60 —Å–µ–∫—É–Ω–¥
- –ö–∞—á–µ—Å—Ç–≤–æ: –º–æ–Ω–æ –∏–ª–∏ —Å—Ç–µ—Ä–µ–æ

#### –°—Ü–µ–Ω–∞—Ä–∏–π:
- –î–ª–∏–Ω–∞: –¥–æ 1000 —Å–∏–º–≤–æ–ª–æ–≤
- –Ø–∑—ã–∫: —Ä—É—Å—Å–∫–∏–π –∏–ª–∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
- –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: –±–µ–∑ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```bash
npm install
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
```bash
# PostgreSQL
createdb airshorts_dev

# Redis
redis-server
```

3. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```env
BOT_TOKEN=your_bot_token
DATABASE_URL=postgresql://localhost/airshorts_dev
REDIS_URL=redis://localhost:6379
DID_API_KEY=your_did_api_key
```

4. **–ó–∞–ø—É—Å–∫:**
```bash
npm run start:dev
```

### Production (Render.com)

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
3. **–ö–æ–º–∞–Ω–¥—ã:**
   - Build: `npm run build`
   - Start: `npm run start:prod`

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```typescript
// –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å–µ—Ä–≤–∏—Å–µ
this.logger.log('Starting video generation with d-id API');
this.logger.error('Error generating video:', error);
```

### –ú–µ—Ç—Ä–∏–∫–∏

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ
- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
- –û—à–∏–±–∫–∏ API

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Telegram Bot –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: Telegram –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Rate Limiting**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤

### API –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **API –∫–ª—é—á–∏**: –í –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **HTTPS**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è webhook
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã

```bash
npm run test
```

### E2E —Ç–µ—Å—Ç—ã

```bash
npm run test:e2e
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ
curl -X POST "http://localhost:3000/did/generate" \
  -H "Content-Type: application/json" \
  -d '{
    "photoUrl": "https://example.com/photo.jpg",
    "audioUrl": "https://example.com/audio.wav",
    "script": "–ü—Ä–∏–≤–µ—Ç, —ç—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ!",
    "platform": "youtube-shorts",
    "duration": 30,
    "quality": "720p"
  }'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl "http://localhost:3000/did/status/video_id_here"
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f logs/app.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "ERROR" logs/app.log
```

### Telegram Bot

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
curl "https://api.telegram.org/bot<TOKEN>/getWebhookInfo"

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
curl -X POST "https://api.telegram.org/bot<TOKEN>/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://your-domain.com/webhook"}'
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: Redis –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
3. **–û—á–µ—Ä–µ–¥–∏**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ –≤ —Ñ–æ–Ω–µ
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –ë–î

## üîÑ CI/CD

### GitHub Actions

```yaml
name: Deploy to Render
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Deploy to Render
        run: |
          # –î–µ–ø–ª–æ–π –Ω–∞ Render.com
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [NestJS Documentation](https://nestjs.com/)
- [Telegraf Documentation](https://telegraf.js.org/)
- [d-id.com API Documentation](https://docs.d-id.com/)
- [Telegram Bot API](https://core.telegram.org/bots/api)

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Telegram Bot Examples](https://github.com/telegraf/telegraf/tree/master/examples)
- [NestJS Best Practices](https://docs.nestjs.com/techniques/database)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –°–æ–∑–¥–∞–Ω–∏–µ Issue

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
3. –°–æ–∑–¥–∞–π—Ç–µ issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
4. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏ –∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã

### –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **Telegram**: @your_username
- **Email**: support@yourdomain.com
- **GitHub**: [Issues](https://github.com/your-username/repo/issues)

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**: 1.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2024  
**–ê–≤—Ç–æ—Ä**: Your Name
