# üîß –†–µ—à–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 1015 AKOOL API

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–±–ª–µ–º—ã

–û—à–∏–±–∫–∞ 1015 "create video error, please try again later" - —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ AKOOL, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—É—é –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ.

## ‚úÖ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- **`test_akool_advanced_diagnostics.sh`** - Bash —Å–∫—Ä–∏–ø—Ç —Å –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
- **`test_akool_diagnostics.py`** - Python —Å–∫—Ä–∏–ø—Ç —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è
- ‚úÖ **Retry –ª–æ–≥–∏–∫–∞** —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π (2, 4, 8, 16, 30 —Å–µ–∫—É–Ω–¥)
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** –∑–∞–ø—Ä–æ—Å–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–æ—Ç** –∞–∫–∫–∞—É–Ω—Ç–∞
- ‚úÖ **–ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫** —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤** –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# Bash –≤–µ—Ä—Å–∏—è
./test_akool_advanced_diagnostics.sh

# Python –≤–µ—Ä—Å–∏—è (—Ç—Ä–µ–±—É–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
python3 -m venv diagnostics_env
source diagnostics_env/bin/activate
pip install requests
python test_akool_diagnostics.py --verbose
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ retry –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```bash
# –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
python test_akool_diagnostics.py --max-retries 10 --base-delay 5
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - —Ç–æ–∫–µ–Ω –ø–æ–ª—É—á–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** - –ø—Ä–æ–≤–µ—Ä–∫–∞ URL –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤
- ‚úÖ **Retry –ª–æ–≥–∏–∫–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
- ‚úÖ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫
- ‚úÖ **–û—Ç—á–µ—Ç—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ª–æ–≥–æ–≤ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- ‚ö†Ô∏è **–û—à–∏–±–∫–∞ 1015** - —Å–µ—Ä–≤–µ—Ä AKOOL –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω
- ‚ö†Ô∏è **Endpoint user/info** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

## üîç –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞ ‚úÖ
```bash
# –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å URL —Ñ–∞–π–ª–æ–≤
- –§–æ—Ä–º–∞—Ç URL (http/https)
- –ù–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry ‚úÖ
```bash
# –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:
–ü–æ–ø—ã—Ç–∫–∞ 1: –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
–ü–æ–ø—ã—Ç–∫–∞ 2: —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
–ü–æ–ø—ã—Ç–∫–∞ 3: —á–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã
–ü–æ–ø—ã—Ç–∫–∞ 4: —á–µ—Ä–µ–∑ 8 —Å–µ–∫—É–Ω–¥
–ü–æ–ø—ã—Ç–∫–∞ 5: —á–µ—Ä–µ–∑ 16 —Å–µ–∫—É–Ω–¥
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–æ—Ç ‚úÖ
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
- –û—Å—Ç–∞—Ç–æ–∫ –∫–≤–æ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞
- –õ–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- –°—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞
```

### 4. –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫ ‚úÖ
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑:
- –¢–∏–ø –æ—à–∏–±–∫–∏ (1015, 1001, 2001)
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é
- –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
```

### 5. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ ‚úÖ
```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:
- JPEG, PNG –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- MP3, WAV, M4A –¥–ª—è –∞—É–¥–∏–æ
- –†–∞–∑–ª–∏—á–Ω—ã–µ –∫–∞—á–µ—Å—Ç–≤–∞ (480p, 720p, 1080p)
```

## üìÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –æ—Ç—á–µ—Ç—ã

–°–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞—é—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ AKOOL:

```
=== –û–¢–ß–ï–¢ –û–ë –û–®–ò–ë–ö–ï AKOOL API ===
–í—Ä–µ–º—è: 2025-09-13 10:51:17
–ö–æ–¥ –æ—à–∏–±–∫–∏: 1015
–°–æ–æ–±—â–µ–Ω–∏–µ: create video error, please try again later

=== –ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ü–†–û–°–ê ===
Client ID: mrj0kTxsc6LoKCEJX2oyyA==
Base URL: https://openapi.akool.com/api/open/v3
Endpoint: /content/video/createbytalkingphoto

=== –û–¢–í–ï–¢ API ===
{"code":1015,"msg":"create video error, please try again later"}

=== –°–ò–°–¢–ï–ú–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø ===
Python –≤–µ—Ä—Å–∏—è: 3.13.0
OS: posix
Requests –≤–µ—Ä—Å–∏—è: 2.32.5

=== –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò ===
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å URL —Ñ–∞–π–ª–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã –≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è < 100MB)
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç
5. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É AKOOL —Å —ç—Ç–∏–º –æ—Ç—á–µ—Ç–æ–º
```

## üõ†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 1. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ retry –ª–æ–≥–∏–∫–∏
```typescript
// –í –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–¥–µ –±–æ—Ç–∞
async createVideoWithRetry(request: AkoolVideoRequest, maxRetries = 5) {
  for (let attempt = 1; attempt <= maxRetries; attempt++) {
    try {
      const result = await this.createVideo(request);
      return result;
    } catch (error) {
      if (error.code === 1015 && attempt < maxRetries) {
        const delay = Math.min(1000 * Math.pow(2, attempt - 1), 30000);
        await new Promise(resolve => setTimeout(resolve, delay));
        continue;
      }
      throw error;
    }
  }
}
```

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫
```typescript
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–ª–µ—Ä—Ç—ã
if (error.code === 1015) {
  this.logger.warn('AKOOL server overload detected', {
    attempt,
    maxRetries,
    delay,
    error: error.message
  });
  
  // –û—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–∞ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
  this.alertService.sendAlert('AKOOL_1015_ERROR', {
    timestamp: new Date(),
    attempts: attempt,
    error: error.message
  });
}
```

### 3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
```typescript
// –ò–∑–±–µ–≥–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–æ–∫–µ–Ω–∞
private tokenCache: { token: string; expires: number } | null = null;

async getAccessToken(): Promise<string> {
  if (this.tokenCache && this.tokenCache.expires > Date.now()) {
    return this.tokenCache.token;
  }
  
  const token = await this.fetchNewToken();
  this.tokenCache = {
    token,
    expires: Date.now() + 3600000 // 1 —á–∞—Å
  };
  
  return token;
}
```

### 4. –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á
```typescript
// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ –≤ –æ—á–µ—Ä–µ–¥–∏
@Queue('video-processing')
export class VideoProcessor {
  @Process('create-video')
  async processVideo(job: Job<AkoolVideoRequest>) {
    try {
      return await this.akoolService.createVideoWithRetry(job.data);
    } catch (error) {
      if (error.code === 1015) {
        // –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç
        await job.delay(300000);
        throw new Error('Retry scheduled');
      }
      throw error;
    }
  }
}
```

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏

–ü—Ä–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö 1015:

1. **–°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏** —Å –ø–æ–º–æ—â—å—é –Ω–∞—à–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –æ—Ç—á–µ—Ç** –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É AKOOL
3. **–£–∫–∞–∂–∏—Ç–µ –≤—Ä–µ–º—è** –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –æ—à–∏–±–æ–∫
4. **–ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã** –∑–∞–ø—Ä–æ—Å–æ–≤

**–ö–æ–Ω—Ç–∞–∫—Ç—ã:**
- Email: support@akool.com
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://docs.akool.com/

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç:

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É** –æ—à–∏–±–∫–∏ 1015
- ‚úÖ **Intelligent retry** —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é** –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ **–ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —Å–æ—Å—Ç–æ—è–Ω–∏—è API
- ‚úÖ **–ì–æ—Ç–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã** –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—à–∏–±–∫–æ–π 1015 AKOOL API! üöÄ

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é  
**–î–∞—Ç–∞**: 13 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è**: 1.0.0
